<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap (and jQuery) -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- Soundcloud -->
	<script src="http://connect.soundcloud.com/sdk.js"></script>
    <!-- DSP.js -->
    <script src="./js/dsp.js"></script>
    <!-- Three.js -->
    <script src="./js/three.min.js"></script>
	<script>SC.initialize({ client_id: '0a25f7c9ec955ced6294e9e5dcbbb532'});</script>
	<script>
        // "Constants"
        var dontCare = -1;
        
	function searchTrack(query)
    {
        SC.get('/tracks', { q: query }, function name(tracks) {
            console.log(tracks);
               
           // Configuration
           var defaultNumSuggestions = 10;
        
			//var resultLen = tracks.length;
			$("#results").empty();
			$("#results").append("<br>");
            
           for (var i = 0; i < defaultNumSuggestions; i++)
           {
               if (i == 0)
               {
//$("results").append("<form action=\"play.html\" method=\"GET\"><input type=\"text\" song=tracks/> <a href=\"\" class=\"list-group-item active\"><b>"+tracks[0].title+"</b></a></form>");
                   $("#results").append("<a href=\"/play.php?song="+tracks[0].id+"\" class=\"list-group-item active\"><b>"+tracks[0].title+"</b></a>");
               }
               else
               {
                   //$("#results").append("<a href=\"#\" class=\"list-group-item\"><b>"+tracks[i].title+"</b></a>");
				   $("#results").append("<a href=\"/play.php?song="+tracks[i].id+"\" class=\"list-group-item\"><b>"+tracks[i].title+"</b></a>");
               }
           }
        });
	}
	</script>
	<title>LivingSound</title>
</head>

<body style="background-image: url(assets/nature.jpg); height:100%;">
<nav class="navbar navbar-default" style="background:rgba(255,255,255,0.95)">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/index.html">Home</a>
		</div>
	</div>
</nav>
<div class="container">
	
	
	<div class="row" style="position: relative; top:30vh">
	<h1 class="text-center">Visualize your favourite song!</h1>
		<form name="query" action="javascript:searchTrack(document.getElementById('songSearch').value)" method="GET" role="search" autocomplete="off">
		  <div class="col-xs-8 col-xs-offset-2" id="form">
			<input type="text" name="q" id="songSearch" style="background-color: rgba(255,255,255,0.8); height:50px;
				border-radius:20px"
				placeholder="Search for a song..." class="form-control">
		  </div>
		  <!--<button type="submit" class="btn btn-default" style="col-xs-2; height:50px">Search</button>-->
		</form>
		<div class="col-xs-8 col-xs-offset-2" style="border-radius:20px">
		<div class="list-group" id="results" style="border-radius:20px"></div></div>
	</div>
	
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</div>
</body>
</html>